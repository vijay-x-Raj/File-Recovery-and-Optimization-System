(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,21218,e=>{"use strict";let s=(0,e.i(75254).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);e.s(["Activity",()=>s],21218)},98919,e=>{"use strict";let s=(0,e.i(75254).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>s],98919)},68148,39312,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(30030),l=e.i(48425),r="Progress",[i,c]=(0,a.createContextScope)(r),[n,d]=i(r),o=t.forwardRef((e,t)=>{var a,r;let{__scopeProgress:i,value:c=null,max:d,getValueLabel:o=u,...m}=e;(d||0===d)&&!g(d)&&console.error((a=`${d}`,`Invalid prop \`max\` of value \`${a}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let x=g(d)?d:100;null===c||f(c,x)||console.error((r=`${c}`,`Invalid prop \`value\` of value \`${r}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let v=f(c,x)?c:null,j=p(v)?o(v,x):void 0;return(0,s.jsx)(n,{scope:i,value:v,max:x,children:(0,s.jsx)(l.Primitive.div,{"aria-valuemax":x,"aria-valuemin":0,"aria-valuenow":p(v)?v:void 0,"aria-valuetext":j,role:"progressbar","data-state":h(v,x),"data-value":v??void 0,"data-max":x,...m,ref:t})})});o.displayName=r;var m="ProgressIndicator",x=t.forwardRef((e,t)=>{let{__scopeProgress:a,...r}=e,i=d(m,a);return(0,s.jsx)(l.Primitive.div,{"data-state":h(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:t})});function u(e,s){return`${Math.round(e/s*100)}%`}function h(e,s){return null==e?"indeterminate":e===s?"complete":"loading"}function p(e){return"number"==typeof e}function g(e){return p(e)&&!isNaN(e)&&e>0}function f(e,s){return p(e)&&!isNaN(e)&&e<=s&&e>=0}x.displayName=m,e.s(["Indicator",()=>x,"Progress",()=>o,"ProgressIndicator",()=>x,"Root",()=>o,"createProgressScope",()=>c],76027);var v=e.i(76027),v=v,j=e.i(75157);function N({className:e,value:t,...a}){return(0,s.jsx)(v.Root,{"data-slot":"progress",className:(0,j.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...a,children:(0,s.jsx)(v.Indicator,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}e.s(["Progress",()=>N],68148);let y=(0,e.i(75254).default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>y],39312)},65138,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(46932),l=e.i(88653),r=e.i(74667),i=e.i(15288),c=e.i(19455),n=e.i(87486),d=e.i(68148),o=e.i(67692),m=e.i(25913),x=e.i(75157);let u=(0,m.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function h({className:e,variant:t,...a}){return(0,s.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,x.cn)(u({variant:t}),e),...a})}function p({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"alert-title",className:(0,x.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function g({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"alert-description",className:(0,x.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}var f=e.i(59684),v=e.i(78894),j=e.i(39312),N=e.i(98919),y=e.i(75254);let b=(0,y.default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),k=(0,y.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),C=(0,y.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);var w=e.i(67240),B=e.i(52786),S=e.i(21218);function T(){let{simulator:e,tick:m,refresh:x}=(0,r.useSimulator)(),[u,y]=(0,t.useState)([.15]),[T,A]=(0,t.useState)([]),[R,P]=(0,t.useState)(!1),[D,I]=(0,t.useState)(0),[$,H]=(0,t.useState)(null),[z,F]=(0,t.useState)(!1),M=(0,t.useMemo)(()=>e.getStats(),[e,m]),O=(0,t.useCallback)(()=>{F(!0),setTimeout(()=>{let s=e.simulateCrash(u[0]),t={id:Date.now(),timestamp:Date.now(),severity:u[0],corruptedBlocks:s,recovered:[],lost:[],filesAffected:[]};A(e=>[t,...e]),x(),setTimeout(()=>F(!1),500)},300)},[e,u,x]),q=(0,t.useCallback)(()=>{P(!0),I(0);let s=0,t=setInterval(()=>{if(I(++s/20*100),s>=20){clearInterval(t);let s=e.recoverCorruptedBlocks();A(e=>{let t=[...e];return t.length>0&&(t[0]={...t[0],recovered:s.recovered,lost:s.lost,filesAffected:s.filesAffected}),t}),x(),setTimeout(()=>{P(!1),I(0)},500)}},100)},[e,x]),U=(0,t.useCallback)(()=>{H(e.runFsck())},[e]);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold tracking-tight",children:["Disk Crash & ",(0,s.jsx)("span",{className:"text-gradient",children:"Recovery"})]}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1 leading-relaxed",children:"Simulate disk failures and use recovery techniques to repair the file system"})]}),(0,s.jsx)(l.AnimatePresence,{children:z&&(0,s.jsx)(a.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-red-900/20 backdrop-blur-md pointer-events-none",children:(0,s.jsxs)(a.motion.div,{initial:{scale:.3,opacity:0},animate:{scale:[.3,1.3,1],opacity:1},transition:{duration:.6,ease:[.25,.46,.45,.94]},className:"text-center",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-red-500/30 blur-3xl rounded-full scale-150"}),(0,s.jsx)(j.Zap,{className:"h-20 w-20 text-red-500 mx-auto relative"})]}),(0,s.jsx)("p",{className:"text-2xl font-bold text-red-400 mt-4 tracking-wider",children:"DISK CRASH!"})]})})}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)(i.Card,{children:[(0,s.jsxs)(i.CardHeader,{className:"pb-2",children:[(0,s.jsxs)(i.CardTitle,{className:"flex items-center gap-2 text-lg",children:[(0,s.jsx)(v.AlertTriangle,{className:"h-5 w-5 text-red-500"}),"Simulate Crash"]}),(0,s.jsx)(i.CardDescription,{children:"Randomly corrupt disk blocks to simulate a crash"})]}),(0,s.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground min-w-[60px]",children:"Severity:"}),(0,s.jsx)(o.Slider,{value:u,onValueChange:y,max:.5,min:.05,step:.05,className:"flex-1"}),(0,s.jsxs)(n.Badge,{variant:"destructive",children:[Math.round(100*u[0]),"%"]})]}),(0,s.jsxs)(c.Button,{onClick:O,variant:"destructive",className:"w-full gap-2",disabled:R,children:[(0,s.jsx)(j.Zap,{className:"h-4 w-4"})," Trigger Disk Crash"]})]})]}),(0,s.jsxs)(i.Card,{children:[(0,s.jsxs)(i.CardHeader,{className:"pb-2",children:[(0,s.jsxs)(i.CardTitle,{className:"flex items-center gap-2 text-lg",children:[(0,s.jsx)(N.Shield,{className:"h-5 w-5 text-emerald-500"}),"Recovery Tools"]}),(0,s.jsx)(i.CardDescription,{children:"Attempt to recover corrupted blocks and check consistency"})]}),(0,s.jsxs)(i.CardContent,{className:"space-y-3",children:[R&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Recovering..."}),(0,s.jsxs)("span",{children:[Math.round(D),"%"]})]}),(0,s.jsx)(d.Progress,{value:D,className:"h-2"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(c.Button,{onClick:q,className:"flex-1 gap-2",disabled:R||0===M.corruptedBlocks,children:[(0,s.jsx)(w.RotateCcw,{className:"h-4 w-4"})," Recover Blocks"]}),(0,s.jsxs)(c.Button,{onClick:U,variant:"outline",className:"flex-1 gap-2",children:[(0,s.jsx)(C,{className:"h-4 w-4"})," Run fsck"]})]})]})]})]}),(0,s.jsxs)(i.Card,{children:[(0,s.jsxs)(i.CardHeader,{children:[(0,s.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(B.HardDrive,{className:"h-5 w-5"}),"Disk Block Status"]}),(0,s.jsxs)(i.CardDescription,{children:["Current state of all ",M.totalBlocks," blocks â€” corrupted blocks flash red"]})]}),(0,s.jsxs)(i.CardContent,{children:[(0,s.jsx)("div",{className:"grid gap-[3px]",style:{gridTemplateColumns:"repeat(32, 1fr)"},children:e.blocks.map(e=>{let t="corrupted"===e.status,l="free"===e.status?"bg-muted/40":"corrupted"===e.status?"bg-red-500":"reserved"===e.status?"bg-amber-500/60":"bg-emerald-500/70";return(0,s.jsx)(a.motion.div,{initial:!1,animate:t?{opacity:[.4,1,.4],scale:[1,1.1,1]}:{opacity:1,scale:1},transition:t?{duration:1,repeat:1/0,ease:"easeInOut"}:{duration:.3},className:`aspect-square rounded-[3px] ${l}`},`${e.id}-${e.status}`)})}),(0,s.jsx)("div",{className:"flex flex-wrap gap-4 mt-4 text-xs text-muted-foreground",children:[{color:"bg-muted/40",label:"Free"},{color:"bg-emerald-500/70",label:"Used (Healthy)"},{color:"bg-red-500",label:`Corrupted (${M.corruptedBlocks})`},{color:"bg-amber-500/60",label:"Reserved"}].map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("div",{className:`w-3 h-3 rounded-sm ${e.color}`}),e.label]},e.label))})]})]}),(0,s.jsx)(l.AnimatePresence,{children:$&&(0,s.jsx)(a.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},children:(0,s.jsxs)(i.Card,{children:[(0,s.jsx)(i.CardHeader,{children:(0,s.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(C,{className:"h-5 w-5 text-blue-500"}),"File System Consistency Check (fsck)"]})}),(0,s.jsxs)(i.CardContent,{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"grid sm:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-muted rounded-lg p-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[0===$.orphanBlocks.length?(0,s.jsx)(b,{className:"h-4 w-4 text-emerald-500"}):(0,s.jsx)(k,{className:"h-4 w-4 text-red-500"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Orphan Blocks"})]}),(0,s.jsx)("p",{className:"text-2xl font-bold mt-1",children:$.orphanBlocks.length}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Blocks marked used but not referenced by any file"})]}),(0,s.jsxs)("div",{className:"bg-muted rounded-lg p-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[0===$.missingBlocks.length?(0,s.jsx)(b,{className:"h-4 w-4 text-emerald-500"}):(0,s.jsx)(k,{className:"h-4 w-4 text-red-500"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Missing Blocks"})]}),(0,s.jsx)("p",{className:"text-2xl font-bold mt-1",children:$.missingBlocks.length}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Blocks referenced by files but marked free"})]}),(0,s.jsxs)("div",{className:"bg-muted rounded-lg p-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[0===$.inconsistentFiles.length?(0,s.jsx)(b,{className:"h-4 w-4 text-emerald-500"}):(0,s.jsx)(k,{className:"h-4 w-4 text-red-500"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Inconsistent Files"})]}),(0,s.jsx)("p",{className:"text-2xl font-bold mt-1",children:$.inconsistentFiles.length}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Files with corrupted or mismatched block references"})]})]}),0===$.orphanBlocks.length&&0===$.missingBlocks.length&&0===$.inconsistentFiles.length&&(0,s.jsxs)(h,{children:[(0,s.jsx)(b,{className:"h-4 w-4"}),(0,s.jsx)(p,{children:"File System is Consistent"}),(0,s.jsx)(g,{children:"No inconsistencies detected. All blocks and file references are valid."})]})]})]})})}),(0,s.jsxs)(i.Card,{children:[(0,s.jsx)(i.CardHeader,{children:(0,s.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(S.Activity,{className:"h-5 w-5"}),"Crash & Recovery History"]})}),(0,s.jsx)(i.CardContent,{children:(0,s.jsx)(f.ScrollArea,{className:"h-[300px]",children:(0,s.jsxs)("div",{className:"space-y-3",children:[T.map(e=>(0,s.jsxs)(a.motion.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"border rounded-lg p-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(j.Zap,{className:"h-4 w-4 text-red-500"}),(0,s.jsxs)("span",{className:"font-medium text-sm",children:["Crash at"," ",new Date(e.timestamp).toLocaleTimeString()]})]}),(0,s.jsxs)(n.Badge,{variant:"destructive",children:[Math.round(100*e.severity),"% severity"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground text-xs",children:"Corrupted"}),(0,s.jsxs)("p",{className:"font-mono font-bold text-red-500",children:[e.corruptedBlocks.length," blocks"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground text-xs",children:"Recovered"}),(0,s.jsxs)("p",{className:"font-mono font-bold text-emerald-500",children:[e.recovered.length," blocks"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground text-xs",children:"Lost"}),(0,s.jsxs)("p",{className:"font-mono font-bold text-orange-500",children:[e.lost.length," blocks"]})]})]}),e.corruptedBlocks.length>0&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.corruptedBlocks.slice(0,20).map(t=>(0,s.jsx)(n.Badge,{variant:e.recovered.includes(t)?"default":e.lost.includes(t)?"destructive":"outline",className:"text-[10px] font-mono",children:t},t)),e.corruptedBlocks.length>20&&(0,s.jsxs)(n.Badge,{variant:"outline",className:"text-[10px]",children:["+",e.corruptedBlocks.length-20]})]})]},e.id)),0===T.length&&(0,s.jsx)("p",{className:"text-center text-muted-foreground py-8 text-sm",children:"No crashes yet. Use the controls above to simulate one."})]})})})]})]})}e.s(["default",()=>T],65138)}]);